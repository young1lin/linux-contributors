{"commit_hash": "f708f6970cc9d6bac71da45c129482092e710537", "short_hash": "f708f6970cc9", "author_name": "Miaohe Lin", "author_email": "linmiaohe@huawei.com", "author_company": "Huawei", "author_date": "2024-07-09T20:04:33+08:00", "committer_name": "Andrew Morton", "committer_email": "akpm@linux-foundation.org", "committer_company": "Linux-foundation", "commit_date": "2024-07-09T15:41:11-07:00", "subject": "mm/hugetlb: fix kernel NULL pointer dereference when migrating hugetlb folio", "primary_category": "UNKNOWN", "secondary_categories": [], "cve_ids": [], "fixes_tag": "", "cc_stable": false, "subsystem_prefix": "unknown", "subsystems_touched": [], "subsystem_tier": 1, "files_changed": 1, "insertions": 3, "deletions": 0, "hunks": 2, "review_chain": {"signed_off_by": ["Miaohe Lin <linmiaohe@huawei.com> (Huawei)", "Andrew Morton <akpm@linux-foundation.org> (Linux-foundation)"], "reviewed_by": [], "tested_by": [], "acked_by": [], "reported_by": []}, "score_total": 0, "score_technical": 0, "score_impact": 0, "score_quality": 0, "score_community": 0, "score_breakdown": {"technical": {"code_volume": 8, "subsystem_criticality": 10, "cross_subsystem": 10, "details": "Small critical fix (3 lines) in core memory management (mm/hugetlb), but touches interaction between hugetlb and folio migration subsystems"}, "impact": {"category_base": 15, "stable_backport": 5, "user_impact": 5, "novelty": 3, "details": "Critical crash bug, marked for stable backport, affects any system using hugetlb folio migration"}, "quality": {"review_chain": 8, "message_quality": 6, "testing": 2, "atomicity": 2, "details": "Excellent commit message with full crash log, root cause analysis, and references to introducing commits. Reviewed by subsystem maintainers (Cc: Hugh Dickins, Matthew Wilcox, Muchun Song). Single-purpose fix."}, "community": {"cross_org_collaboration": 4, "maintainer_engagement": 3, "response_quality": 2, "details": "Huawei engineer fixing crash, coordinated with Google (Hugh Dickins), Oracle (Matthew Wilcox), and other community members. Merged by Andrew Morton (mm maintainer)."}, "A1_code_volume": 0, "A2_subsystem_criticality": 0, "A3_cross_subsystem": 0, "B1_category_base": 0, "B2_stable_significance": 0, "B3_user_impact": 0, "B4_novelty": 0, "C1_review_chain": 0, "C2_commit_message": 0, "C3_testing": 0, "C4_atomicity": 0, "D1_cross_org": 0, "D2_maintainer_endorsement": 0, "D3_community_response": 0}, "score_justification": "", "code_snippet": "@@ -2162,6 +2162,9 @@ static struct folio *alloc_buddy_hugetlb_folio(struct hstate *h,\n \t\tnid = numa_mem_id();\n retry:\n \tfolio = __folio_alloc(gfp_mask, order, nid, nmask);\n+\t/* Ensure hugetlb folio won't have large_rmappable flag set. */\n+\tif (folio)\n+\t\tfolio_clear_large_rmappable(folio);\n \n \tif (folio && !folio_ref_freeze(folio, 1)) {\n \t\tfolio_put(folio);\n", "flags": [], "link": "https://lore.kernel.org/linux-kernel/f708f6970cc9d6bac71da45c129482092e710537"}
{"commit_hash": "86d81ec5f5f05846c7c6e48ffb964b24cba2e669", "short_hash": "86d81ec5f5f0", "author_name": "Youling Tang", "author_email": "tangyouling@kylinos.cn", "author_company": "Kylin", "author_date": "2024-07-03T15:09:55+08:00", "committer_name": "Kent Overstreet", "committer_email": "kent.overstreet@linux.dev", "committer_company": "Linux", "commit_date": "2024-07-10T09:53:39-04:00", "subject": "bcachefs: Mark bch_inode_info as SLAB_ACCOUNT", "primary_category": "UNKNOWN", "secondary_categories": [], "cve_ids": [], "fixes_tag": "", "cc_stable": false, "subsystem_prefix": "unknown", "subsystems_touched": [], "subsystem_tier": 2, "files_changed": 1, "insertions": 2, "deletions": 1, "hunks": 2, "review_chain": {"signed_off_by": ["Youling Tang <tangyouling@kylinos.cn> (Kylin)", "Kent Overstreet <kent.overstreet@linux.dev> (Linux)"], "reviewed_by": [], "tested_by": [], "acked_by": [], "reported_by": []}, "score_total": 0, "score_technical": 0, "score_impact": 0, "score_quality": 0, "score_community": 0, "score_breakdown": {"A1_code_volume": 0, "A2_subsystem_criticality": 0, "A3_cross_subsystem": 0, "B1_category_base": 0, "B2_stable_significance": 0, "B3_user_impact": 0, "B4_novelty": 0, "C1_review_chain": 0, "C2_commit_message": 0, "C3_testing": 0, "C4_atomicity": 0, "D1_cross_org": 0, "D2_maintainer_endorsement": 0, "D3_community_response": 0}, "score_justification": "", "code_snippet": "@@ -2071,7 +2071,8 @@ int __init bch2_vfs_init(void)\n {\n \tint ret = -ENOMEM;\n \n-\tbch2_inode_cache = KMEM_CACHE(bch_inode_info, SLAB_RECLAIM_ACCOUNT);\n+\tbch2_inode_cache = KMEM_CACHE(bch_inode_info, SLAB_RECLAIM_ACCOUNT |\n+\t\t\t\t      SLAB_ACCOUNT);\n \tif (!bch2_inode_cache)\n \t\tgoto err;\n \n", "flags": [], "link": "https://lore.kernel.org/linux-kernel/86d81ec5f5f05846c7c6e48ffb964b24cba2e669"}
